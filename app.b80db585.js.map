{"mappings":"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","sources":["./src/user.store.js","./src/list.page.js","./src/form.validate.helper.js","./src/register.page.js","./app.js","./src/user.service.js"],"sourcesContent":["export default class UserStore {\n    localStorage = window.localStorage;\n\n    constructor() { }\n\n    getUser(id) {\n        const listUser = JSON.parse(this.localStorage.getItem('user')) || [];\n        return id ? listUser[id] : listUser;\n    }\n\n    addUser(user) {\n        const listUser = JSON.parse(this.localStorage.getItem('user')) || [];\n        const newListUser = listUser.concat(user);\n        return new Promise(resolve => setTimeout(() => resolve(this.localStorage.setItem('user', JSON.stringify(newListUser))), 2200));\n    }\n\n    removeUser(id) {\n        const listUser = JSON.parse(this.localStorage.getItem('user')) || [];\n        const newListUser = listUser.filter((_, index) => index !== id)\n        this.localStorage.setItem('user', JSON.stringify(newListUser));\n    }\n}","import UserStore from './user.store.js';\n\nexport default class ListPage {\n    userStore = new UserStore();\n\n    constructor() { }\n\n    render() {\n        const ulElement  = document.getElementById('listUser');\n        const fragment = document.createDocumentFragment();\n        const user = this.userStore.getUser();\n        ulElement.innerHTML = '';\n        user.forEach((user, index) => {\n            const liElement = document.createElement('li');\n            const innerFragment = document.createRange().createContextualFragment(`\n                <div class=\"item-content\">\n                    <h3 class=\"h3\">${user.name}</h3>\n                    <p class=\"text\">\n                        ${user.email}<br>\n                        ${user.cpf}<br>\n                        ${user.phone}<br>\n                    </p>\n                    <i class=\"btn-link remove-user\">Remover</i>\n                </div>\n            `);\n            liElement.appendChild(innerFragment);\n            liElement.querySelector('.remove-user').addEventListener('click', this.onRemove.bind(this, index), false);\n            liElement.classList.add('item');\n            fragment.appendChild(liElement);\n        });\n        ulElement.appendChild(fragment);\n    }\n\n    onRemove(index) {\n        this.userStore.removeUser(index);\n        this.render();\n    }\n}","export default class FormValidateHelper {\n\n    customValidate = {\n        cpfValidate: (cpf) => {\n            cpf = cpf.replace(/\\D/g, '');\n            if(cpf.toString().length != 11 || /^(\\d)\\1{10}$/.test(cpf)) return false;\n            var result = true;\n            [9,10].forEach(function(j){\n                var soma = 0, r;\n                cpf.split(/(?=)/).splice(0,j).forEach(function(e, i){\n                    soma += parseInt(e) * ((j+2)-(i+1));\n                });\n                r = soma % 11;\n                r = (r <2)?0:11-r;\n                if(r != cpf.substring(j, j+1)) result = false;\n            });\n            return result;\n        }\n    }\n\n    constructor() { }\n\n    setErrorMessage(elem) {\n        const label = elem.dataset.label;\n        const validate = elem.dataset.validate;\n        try {\n            validate && elem.setCustomValidity(this.customValidate[validate](elem.value) ? '' : `${label} inválido.`);\n        } catch (_) {\n            throw new Error(`Custom [data-validate] value at: ${elem.outerHTML} is undefined`);\n        }\n        const validity = {\n            badInput: [`${label} contem caracter inválido.`, elem.validity.badInput],\n            rangeOverflow: [`${label} inválido.`, elem.validity.rangeOverflow],\n            rangeUnderflow: [`${label} inválido.`, elem.validity.rangeUnderflow],\n            stepMismatch: [`${label} inválido.`, elem.validity.stepMismatch],\n            patternMismatch: [`${label} contem caracter inválido.`, elem.validity.patternMismatch],\n            tooLong: [`${label} deve conter até ${elem.maxLength} caracteres.`, elem.validity.tooLong],\n            tooShort: [`${label} deve conter ${elem.minLength} caracteres ou mais.`, elem.validity.tooShort],\n            typeMismatch: [`${label} inválido.`, elem.validity.typeMismatch],\n            valid: ['', elem.validity.valid],\n            valueMissing: [`${label} obrigatório.`, elem.validity.valueMissing],\n            customError: [elem.validationMessage, elem.validity.customError]\n        };\n        const validityName = Object.keys(validity).find(key => {\n            const [, isInvalid] = validity[key];\n            return isInvalid;\n        });\n        const [message] = validity[validityName];\n    \n        return message || '';\n    }\n}","import UserStore from './user.store.js';\nimport FormValidateHelper from './form.validate.helper.js';\n\nexport default class RegisterPage {\n    userStore = new UserStore();\n    formValidateHelper = new FormValidateHelper();\n\n    constructor() { }\n\n    render() {\n        const formElement = document.getElementById('userForm');\n        const fieldElementList = Array.from(formElement.elements).filter(elem => elem.tagName !== \"BUTTON\");\n        const btnSubmitElement = document.querySelector(\"[type='submit']\");\n        formElement.addEventListener('submit', this.onSubmit.bind(this));\n        fieldElementList.forEach(field => {\n            const labelElement = field.parentElement.previousElementSibling;\n            field.addEventListener('focus', () => {\n                !field.value && labelElement.classList.add('filled');\n            });\n            field.addEventListener('blur', () => {\n                !field.value && labelElement.classList.remove('filled');\n            });\n            field.addEventListener('input', () => {\n                const fieldErrorElement = document.querySelector(`#${field.id} + .error`);\n                document.activeElement === field || field.value ? labelElement.classList.add('filled') : labelElement.classList.remove('filled');\n                if(!field.classList.contains('dirty')) {\n                    field.classList.add('dirty');\n                }\n                fieldErrorElement.textContent = this.formValidateHelper.setErrorMessage(field);\n                btnSubmitElement.disabled = !formElement.checkValidity();\n            });\n        });\n    }\n\n    async onSubmit(event) {\n        const formObj = Object.fromEntries(new FormData(event.target));\n        const [ btnSubmitElement ] = Array.from(event.target.elements).filter(elem => elem.tagName === \"BUTTON\");\n        const fieldElementList = Array.from(event.target.elements).filter(elem => elem.tagName !== \"BUTTON\");\n        if(!event.target.checkValidity()) {\n            event.preventDefault();\n            return;\n        }\n        btnSubmitElement.classList.add('loading');\n        btnSubmitElement.disabled = true;\n        await this.userStore.addUser(formObj);\n        event.target.reset();\n        btnSubmitElement.classList.remove('loading');\n        btnSubmitElement.firstChild.data = 'Sucesso';\n        btnSubmitElement.disabled = false;\n        fieldElementList.forEach(elem => {\n            const labelElement = elem.parentElement.previousElementSibling;\n            labelElement.classList.remove('filled');\n            elem.classList.remove('dirty');\n        });\n        setTimeout(() => {\n            btnSubmitElement.firstChild.data = 'Cadastrar';\n            btnSubmitElement.disabled = true;\n        }, 2000);\n        event.preventDefault();\n    }\n}","import UserService from './src/user.service.js';\nimport UserStore from './src/user.store.js';\nimport ListPage from './src/list.page.js';\nimport RegisterPage from './src/register.page.js';\n\nconst userService = new UserService();\nconst userStore = new UserStore();\n\n(async function() {\n    if(!localStorage.getItem('user')) {\n        const div = document.createElement(\"div\");\n        div.classList.add('loader');\n        document.body.classList.add('screen');\n        document.body.prepend(div);\n        const user = await userService.getUser();\n        await userStore.addUser(user)\n        document.body.classList.remove('screen');\n        div.classList.remove('loader');\n    }\n    switch (window.location.pathname) {\n        case '/native-form-validation/':\n            const registerPage = new RegisterPage();\n            registerPage.render();\n            break;\n\n        case '/native-form-validation/listar.html':\n            const listPage = new ListPage();\n            listPage.render();\n            break;\n\n        case '/native-form-validation/404.html':\n            break;\n\n        default:\n            window.location.href = \"/native-form-validation/404.html\";\n            break;\n    }\n}());","export default class UserService {\n    url = 'https://private-21e8de-rafaellucio.apiary-mock.com';\n\n    constructor() { }\n\n    async getUser() {\n        const response = await fetch(`${this.url}/users`)\n        .catch((error) => {\n            console.error('Error:', error);\n        });\n        return response.json();\n    }\n}"],"names":["UserStore","constructor","this","window","localStorage","getUser","id","listUser","JSON","parse","getItem","addUser","user","newListUser","concat","Promise","resolve","setTimeout","setItem","stringify","removeUser","filter","_","index","ListPage","$b6b317f8f63e7124f5dae72b3e95f21$export$default","render","ulElement","document","getElementById","fragment","createDocumentFragment","userStore","innerHTML","forEach","liElement","createElement","innerFragment","createRange","createContextualFragment","name","email","cpf","phone","appendChild","querySelector","addEventListener","onRemove","bind","classList","add","FormValidateHelper","cpfValidate","replace","toString","length","test","result","j","r","soma","split","splice","e","i","parseInt","substring","setErrorMessage","elem","label","dataset","validate","setCustomValidity","customValidate","value","Error","outerHTML","validity","badInput","rangeOverflow","rangeUnderflow","stepMismatch","patternMismatch","tooLong","maxLength","tooShort","minLength","typeMismatch","valid","valueMissing","customError","validationMessage","validityName","Object","keys","find","key","isInvalid","message","RegisterPage","$d05d56d2ddfb5a968e8db0ea599bfe$var$_defineProperty","$ba5e72f8877cc3f965769c1a10c7544$export$default","formElement","fieldElementList","Array","from","elements","tagName","btnSubmitElement","onSubmit","field","labelElement","parentElement","previousElementSibling","remove","fieldErrorElement","activeElement","contains","textContent","formValidateHelper","disabled","checkValidity","[object Object]","event","formObj","fromEntries","FormData","target","reset","firstChild","data","preventDefault","userService","fetch","url","catch","error","console","json","div","body","prepend","location","pathname","$d05d56d2ddfb5a968e8db0ea599bfe$export$default","$cc1e9ac0dcd64358b197929141a86390$export$default","href"],"version":3,"file":"app.b80db585.js.map"}